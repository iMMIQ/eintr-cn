<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.3, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是针对非程序员的 Emacs Lisp 编程简介


随 Emacs 版本 29.1 发行.

Copyright © 1990-1995, 1997, 2001-2023 自由软件基金会.



纸质版本可在 https://shop.fsf.org/ 获得。由以下机构出版：

GNU Press,                        https://www.fsf.org/licensing/gnu-press/
自由软件基金会旗下的一个分部                 电子邮件：sales@fsf.org
Free Software Foundation, Inc.    电话：+1 (617) 542-5942
51 Franklin Street, Fifth Floor   传真：+1 (617) 542-2652
美国马萨诸塞州波士顿，邮编02110-1301


ISBN 1-882114-43-4

允许复制、分发和/或修改本文档，遵循 GNU 自由文档许可证 1.3 版或由自由软件基金会发布的任何以后版本的条款；本文档没有不变章节，封面文本为“GNU 手册”，反面封面文本如 (a) 所示。许可证的副本包含在名为“GNU 自由文档许可证”的章节中。

(a) FSF 的背面封面文本是：“你有自由复制和修改这份 GNU 手册。从 FSF 购买副本支持其开发 GNU 并推广软件自由。” -->
<title>Complete copy-region-as-kill (Programming in Emacs Lisp)</title>

<meta name="description" content="Complete copy-region-as-kill (Programming in Emacs Lisp)">
<meta name="keywords" content="Complete copy-region-as-kill (Programming in Emacs Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="copy_002dregion_002das_002dkill.html" rel="up" title="copy-region-as-kill">
<link href="copy_002dregion_002das_002dkill-body.html" rel="next" title="copy-region-as-kill body">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>


</head>

<body lang="en">
<div class="unnumberedsubsec-level-extent" id="Complete-copy_002dregion_002das_002dkill">
<div class="nav-panel">
<p>
Next: <a href="copy_002dregion_002das_002dkill-body.html" accesskey="n" rel="next">The Body of <code class="code">copy-region-as-kill</code></a>, Up: <a href="copy_002dregion_002das_002dkill.html" accesskey="u" rel="up"><code class="code">copy-region-as-kill</code></a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="unnumberedsubsec" id="The-complete-copy_002dregion_002das_002dkill-function-definition">The complete <code class="code">copy-region-as-kill</code> function definition</h4>

<p>Here is the complete text of the version 22 <code class="code">copy-region-as-kill</code>
function:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(defun copy-region-as-kill (beg end)
  &quot;Save the region as if killed, but don't kill it.
In Transient Mark mode, deactivate the mark.
If `interprogram-cut-function' is non-nil, also save the text for a window
system cut and paste.&quot;
  (interactive &quot;r&quot;)
</pre></div><div class="group"><pre class="example-preformatted">  (if (eq last-command 'kill-region)
      (kill-append (filter-buffer-substring beg end) (&lt; end beg))
    (kill-new (filter-buffer-substring beg end)))
</pre></div><div class="group"><pre class="example-preformatted">  (if transient-mark-mode
      (setq deactivate-mark t))
  nil)
</pre></div></div>

<p>As usual, this function can be divided into its component parts:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(defun copy-region-as-kill (<var class="var">argument-list</var>)
  &quot;<var class="var">documentation</var>&hellip;&quot;
  (interactive &quot;r&quot;)
  <var class="var">body</var>&hellip;)
</pre></div></div>

<p>The arguments are <code class="code">beg</code> and <code class="code">end</code> and the function is
interactive with <code class="code">&quot;r&quot;</code>, so the two arguments must refer to the
beginning and end of the region.  If you have been reading through this
document from the beginning, understanding these parts of a function is
almost becoming routine.
</p>
<p>The documentation is somewhat confusing unless you remember that the
word &ldquo;kill&rdquo; has a meaning different from usual.  The Transient Mark
and <code class="code">interprogram-cut-function</code> comments explain certain
side-effects.
</p>
<p>After you once set a mark, a buffer always contains a region.  If you
wish, you can use Transient Mark mode to highlight the region
temporarily.  (No one wants to highlight the region all the time, so
Transient Mark mode highlights it only at appropriate times.  Many
people turn off Transient Mark mode, so the region is never
highlighted.)
</p>
<p>Also, a windowing system allows you to copy, cut, and paste among
different programs.  In the X windowing system, for example, the
<code class="code">interprogram-cut-function</code> function is <code class="code">x-select-text</code>,
which works with the windowing system&rsquo;s equivalent of the Emacs kill
ring.
</p>
<p>The body of the <code class="code">copy-region-as-kill</code> function starts with an
<code class="code">if</code> clause.  What this clause does is distinguish between two
different situations: whether or not this command is executed
immediately after a previous <code class="code">kill-region</code> command.  In the first
case, the new region is appended to the previously copied text.
Otherwise, it is inserted into the beginning of the kill ring as a
separate piece of text from the previous piece.
</p>
<p>The last two lines of the function prevent the region from lighting up
if Transient Mark mode is turned on.
</p>
<p>The body of <code class="code">copy-region-as-kill</code> merits discussion in detail.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="copy_002dregion_002das_002dkill-body.html">The Body of <code class="code">copy-region-as-kill</code></a>, Up: <a href="copy_002dregion_002das_002dkill.html"><code class="code">copy-region-as-kill</code></a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
