<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.3, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是针对非程序员的 Emacs Lisp 编程简介


随 Emacs 版本 29.1 发行.

Copyright © 1990-1995, 1997, 2001-2023 自由软件基金会.



纸质版本可在 https://shop.fsf.org/ 获得。由以下机构出版：

GNU Press,                        https://www.fsf.org/licensing/gnu-press/
自由软件基金会旗下的一个分部                 电子邮件：sales@fsf.org
Free Software Foundation, Inc.    电话：+1 (617) 542-5942
51 Franklin Street, Fifth Floor   传真：+1 (617) 542-2652
美国马萨诸塞州波士顿，邮编02110-1301


ISBN 1-882114-43-4

允许复制、分发和/或修改本文档，遵循 GNU 自由文档许可证 1.3 版或由自由软件基金会发布的任何以后版本的条款；本文档没有不变章节，封面文本为“GNU 手册”，反面封面文本如 (a) 所示。许可证的副本包含在名为“GNU 自由文档许可证”的章节中。

(a) FSF 的背面封面文本是：“你有自由复制和修改这份 GNU 手册。从 FSF 购买副本支持其开发 GNU 并推广软件自由。” -->
<title>the-the (Programming in Emacs Lisp)</title>

<meta name="description" content="the-the (Programming in Emacs Lisp)">
<meta name="keywords" content="the-the (Programming in Emacs Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Kill-Ring.html" rel="next" title="Kill Ring">
<link href="Jie-Lun-.html" rel="prev" title="结论">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>
<link rel="stylesheet" type="text/css" href="https://www.gnu.org/software/emacs/manual.css">


</head>

<body lang="en">
<div class="appendix-level-extent" id="the_002dthe">
<div class="nav-panel">
<p>
Next: <a href="Kill-Ring.html" accesskey="n" rel="next">Handling the Kill Ring</a>, Previous: <a href="Jie-Lun-.html" accesskey="p" rel="prev">结论</a>, Up: <a href="index.html" accesskey="u" rel="up">Emacs Lisp 编程简介</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h2 class="appendix" id="The-the_002dthe-Function">Appendix A The <code class="code">the-the</code> Function</h2>
<a class="index-entry-id" id="index-the_002dthe"></a>
<a class="index-entry-id" id="index-Duplicated-words-function"></a>
<a class="index-entry-id" id="index-Words_002c-duplicated"></a>

<p>Sometimes when you you write text, you duplicate words&mdash;as with &ldquo;you
you&rdquo; near the beginning of this sentence.  I find that most
frequently, I duplicate &ldquo;the&rdquo;; hence, I call the function for
detecting duplicated words, <code class="code">the-the</code>.
</p>
<p>As a first step, you could use the following regular expression to
search for duplicates:
</p>
<div class="example smallexample">
<pre class="example-preformatted">\\(\\w+[ \t\n]+\\)\\1
</pre></div>

<p>This regexp matches one or more word-constituent characters followed
by one or more spaces, tabs, or newlines.  However, it does not detect
duplicated words on different lines, since the ending of the first
word, the end of the line, is different from the ending of the second
word, a space.  (For more information about regular expressions, see
<a class="ref" href="Zheng-Ze-Biao-Da-Shi-Sou-Suo-.html">Regular Expression Searches</a>, as well as
<a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Regexps.html#Regexps">Syntax of Regular Expressions</a> in <cite class="cite">The GNU Emacs
Manual</cite>, and <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Regular-Expressions.html#Regular-Expressions">Regular Expressions</a> in <cite class="cite">The GNU Emacs Lisp Reference Manual</cite>.)
</p>
<p>You might try searching just for duplicated word-constituent
characters but that does not work since the pattern detects doubles
such as the two occurrences of &ldquo;th&rdquo; in &ldquo;with the&rdquo;.
</p>
<p>Another possible regexp searches for word-constituent characters
followed by non-word-constituent characters, reduplicated.  Here,
&lsquo;<samp class="samp">\\w+</samp>&rsquo;<!-- /@w --> matches one or more word-constituent characters and
&lsquo;<samp class="samp">\\W*</samp>&rsquo;<!-- /@w --> matches zero or more non-word-constituent characters.
</p>
<div class="example smallexample">
<pre class="example-preformatted">\\(\\(\\w+\\)\\W*\\)\\1
</pre></div>

<p>Again, not useful.
</p>
<p>Here is the pattern that I use.  It is not perfect, but good enough.
&lsquo;<samp class="samp">\\b</samp>&rsquo;<!-- /@w --> matches the empty string, provided it is at the beginning
or end of a word; &lsquo;<samp class="samp">[^@&nbsp;\n\t]+</samp>&rsquo;<!-- /@w --> matches one or more occurrences of
any characters that are <em class="emph">not</em> an @-sign, space, newline, or tab.
</p>
<div class="example smallexample">
<pre class="example-preformatted">\\b\\([^@ \n\t]+\\)[ \n\t]+\\1\\b
</pre></div>

<p>One can write more complicated expressions, but I found that this
expression is good enough, so I use it.
</p>
<p>Here is the <code class="code">the-the</code> function, as I include it in my
<samp class="file">.emacs</samp> file, along with a handy global key binding:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(defun the-the ()
  &quot;Search forward for for a duplicated word.&quot;
  (interactive)
  (message &quot;Searching for for duplicated words ...&quot;)
  (push-mark)
</pre></div><div class="group"><pre class="example-preformatted">  ;; This regexp is not perfect
  ;; but is fairly good over all:
  (if (re-search-forward
       &quot;\\b\\([^@ \n\t]+\\)[ \n\t]+\\1\\b&quot; nil 'move)
      (message &quot;Found duplicated word.&quot;)
    (message &quot;End of buffer&quot;)))
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">;; Bind 'the-the' to  C-c \
(global-set-key &quot;\C-c\\&quot; 'the-the)
</pre></div></div>

<br>
<p>Here is test text:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">one two two three four five
five six seven
</pre></div></div>

<p>You can substitute the other regular expressions shown above in the
function definition and try each of them on this list.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Kill-Ring.html">Handling the Kill Ring</a>, Previous: <a href="Jie-Lun-.html">结论</a>, Up: <a href="index.html">Emacs Lisp 编程简介</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
